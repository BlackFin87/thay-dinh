<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>√în T·∫≠p Tin H·ªçc L·ªõp 3 - HK1</title>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;500;600&family=Roboto:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #FF8C00; /* M√†u cam nƒÉng ƒë·ªông cho l·ªõp 3 */
            --primary-hover: #e07b00;
            --bg-color: #FFF8E1; /* M√†u n·ªÅn v√†ng nh·∫°t d·ªãu m·∫Øt */
            --text-color: #4a4a4a;
            --success: #4CAF50; /* M√†u xanh l√° t∆∞∆°i */
            --error: #FF5252;   /* M√†u ƒë·ªè */
        }

        body {
            font-family: 'Roboto', sans-serif; /* Font ch·ªØ d·ªÖ ƒë·ªçc */
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0; padding: 20px; line-height: 1.6;
        }

        .main-container {
            background: #fff; max-width: 800px; margin: 0 auto;
            border-radius: 20px; /* Bo tr√≤n nhi·ªÅu h∆°n cho d·ªÖ th∆∞∆°ng */
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
            overflow: hidden; border: 3px solid #FFCC80;
        }

        .header-banner {
            background: var(--primary); color: white;
            padding: 25px; text-align: center;
            font-family: 'Fredoka', sans-serif; /* Font ti√™u ƒë·ªÅ ng·ªô nghƒ©nh */
        }
        .header-banner h1 { margin: 0; font-size: 28px; text-transform: uppercase; letter-spacing: 1px; }
        .header-banner p { margin: 5px 0 0; font-size: 16px; opacity: 0.9; }

        .content-body { padding: 30px; }

        /* Form nh·∫≠p li·ªáu */
        .form-group { margin-bottom: 20px; }
        .form-label { display: block; margin-bottom: 8px; font-weight: 700; font-size: 18px; }
        .form-input {
            width: 100%; padding: 15px;
            border: 2px solid #ddd; border-radius: 12px;
            font-size: 18px; box-sizing: border-box; transition: border 0.3s;
        }
        .form-input:focus { border-color: var(--primary); outline: none; }

        /* N√∫t b·∫•m to h∆°n cho l·ªõp 3 */
        .btn-primary {
            background: var(--primary); color: white;
            border: none; padding: 18px 30px;
            border-radius: 15px; font-size: 20px; font-weight: 700; font-family: 'Fredoka', sans-serif;
            cursor: pointer; width: 100%; transition: transform 0.2s, background 0.2s;
            box-shadow: 0 4px 0 #d37200; /* Hi·ªáu ·ª©ng n√∫t n·ªïi */
        }
        .btn-primary:hover { background-color: var(--primary-hover); transform: translateY(-2px); }
        .btn-primary:active { transform: translateY(2px); box-shadow: none; }
        
        .btn-secondary {
            background: #78909C; color: white;
            border: none; padding: 15px 30px; margin-top: 15px;
            border-radius: 12px; font-size: 18px; font-weight: 700;
            cursor: pointer; width: 100%;
        }

        .student-info-bar {
            background: #FFE0B2; padding: 15px 20px; color: #E65100;
            border-radius: 12px; margin-bottom: 25px; font-weight: 600; font-size: 18px; text-align: center;
        }
        
        /* Giao di·ªán c√¢u h·ªèi */
        .question-block {
            background: #fff; border: 2px solid #eee;
            padding: 20px; border-radius: 15px; margin-bottom: 25px;
            position: relative;
        }

        .q-title {
            font-size: 20px; font-weight: 700; margin-bottom: 15px; color: #E65100;
        }

        .option-label {
            display: flex; align-items: center;
            padding: 12px 15px; border: 2px solid #f0f2f5;
            border-radius: 10px; margin-bottom: 12px;
            cursor: pointer; transition: all 0.2s; font-size: 18px;
        }
        .option-label:hover { background: #FFF3E0; border-color: #FFCC80; }
        
        .option-input:checked + .option-text { color: #E65100; font-weight: 600; }
        .option-input:checked + .option-text::before {
             border-color: var(--primary); background-color: var(--primary);
             box-shadow: inset 0 0 0 4px white;
        }

        .option-input { display: none; }
        .option-text { display: flex; align-items: center; width: 100%; }
        .option-text::before {
            content: ''; width: 24px; height: 24px;
            border: 2px solid #adb5bd; border-radius: 50%;
            margin-right: 15px; flex-shrink: 0; transition: all 0.2s;
        }

        /* --- CH·∫æ ƒê·ªò XEM L·∫†I --- */
        .review-mode .option-input { pointer-events: none; }
        
        .review-mode .option-label.correct {
            background-color: #E8F5E9; border-color: #A5D6A7; color: #2E7D32;
        }
        .review-mode .option-label.correct .option-text::after {
            content: ' ‚úÖ ƒê√∫ng r·ªìi!'; margin-left: auto; font-weight: bold; font-size: 16px;
        }

        .review-mode .option-label.wrong {
            background-color: #FFEBEE; border-color: #EF9A9A; color: #C62828;
        }
        .review-mode .option-label.wrong .option-text::after {
            content: ' ‚ùå Sai nh√©'; margin-left: auto; font-weight: bold; font-size: 16px;
        }

        .submit-section { margin-top: 30px; padding-top: 20px; border-top: 2px dashed #eee; }

        .result-box { text-align: center; padding: 40px 20px; }
        .score-huge { font-size: 80px; font-weight: 700; color: var(--primary); margin: 10px 0; font-family: 'Fredoka', sans-serif; }
        
        .loading-overlay { position: fixed; top:0; left:0; width:100%; height:100%; background:rgba(255,255,255,0.95); z-index:999; display:flex; justify-content:center; align-items:center; font-size:24px; color: var(--primary); font-weight: bold; flex-direction: column; }
        .hidden { display: none !important; }
    </style>
</head>
<body>
<div style="padding: 15px; background-color: #f8fafc; border-bottom: 1px solid #e2e8f0; margin-bottom: 20px;">
    <a href="chon-khoi.html" style="
        display: inline-flex;
        align-items: center;
        text-decoration: none;
        color: #1e293b;
        font-family: Arial, sans-serif;
        font-weight: bold;
        background-color: #ffffff;
        padding: 10px 20px;
        border-radius: 50px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        border: 1px solid #cbd5e0;
    ">
        ‚¨ÖÔ∏è Quay l·∫°i ch·ªçn kh·ªëi l·ªõp
    </a>
</div>
<div class="main-container">
    <div class="header-banner">
        <h1>B√ÄI T·∫¨P TIN H·ªåC L·ªöP 3</h1>
        <p>√în t·∫≠p H·ªçc k·ª≥ I (B√†i 1 - B√†i 7)</p>
    </div>

    <div class="content-body">
        <div id="start-screen">
            <p style="text-align: center; margin-bottom: 30px; font-size: 18px;">Ch√†o c√°c con! H√£y nh·∫≠p t√™n v√† ch·ªçn l·ªõp ƒë·ªÉ b·∫Øt ƒë·∫ßu l√†m b√†i nh√©!</p>
            <div class="form-group">
                <label class="form-label">H·ªç v√† t√™n c·ªßa con:</label>
                <input type="text" id="student-name" class="form-input" placeholder="V√≠ d·ª•: Nguy·ªÖn VƒÉn An">
            </div>
            <div class="form-group">
                <label class="form-label">Con h·ªçc l·ªõp n√†o?</label>
                <select id="student-class" class="form-input">
                    <option value="" disabled selected>-- Ch·ªçn l·ªõp --</option>
                    <option value="3/4">3/4</option> <option value="3/5">3/5</option>
                    <option value="3/8">3/8</option> <option value="3/9">3/9</option>
                </select>
            </div>
            <button class="btn-primary" onclick="startQuiz()">B·∫ÆT ƒê·∫¶U L√ÄM B√ÄI üöÄ</button>
        </div>

        <div id="quiz-screen" class="hidden">
            <div class="student-info-bar">
                B·∫°n: <span id="info-name"></span> - L·ªõp: <span id="info-class"></span>
            </div>
            <div id="questions-list"></div>
            <div class="submit-section" id="submit-btn-area">
                <button class="btn-primary submit-btn" onclick="submitQuiz()">N·ªòP B√ÄI üìù</button>
            </div>
            <div class="submit-section hidden" id="review-btn-area">
                 <button class="btn-primary" onclick="location.reload()">L√ÄM L·∫†I B√ÄI KH√ÅC üîÑ</button>
            </div>
        </div>

        <div id="result-screen" class="hidden result-box">
            <h2 style="color: #E65100;">üéâ Ho√†n th√†nh b√†i l√†m! üéâ</h2>
            <div class="student-info-bar" style="background:white; border: 2px dashed #FFCC80;">
                H·ªçc sinh: <strong id="res-name"></strong> - L·ªõp: <strong id="res-class"></strong>
            </div>
            
            <p style="font-size: 20px; color: #555;">S·ªë c√¢u tr·∫£ l·ªùi ƒë√∫ng:</p>
            <div class="score-huge" id="res-score">0</div>
            <h3 id="res-total" style="color: #777;"></h3>
            
            <div id="connection-status" style="margin-top: 20px; font-weight: 500;"></div>
            
            <button class="btn-primary" onclick="reviewQuiz()">üîç XEM L·∫†I B√ÄI V·ª™A L√ÄM</button>
            <button class="btn-secondary" onclick="location.reload()">üè† Quay v·ªÅ m√†n h√¨nh ch√≠nh</button>
        </div>
    </div>
</div>

<div id="loading" class="loading-overlay hidden">
    <div style="font-size: 50px;">‚è≥</div>
    <div>ƒêang ch·∫•m ƒëi·ªÉm...<br>ƒê·ª£i x√≠u nh√©!</div>
</div>

<script>
// ============================================================
// QUAN TR·ªåNG: D√ÅN LINK GOOGLE SHEET (WEB APP URL) C·ª¶A B·∫†N V√ÄO D∆Ø·ªöI ƒê√ÇY:
const scriptURL = 'https://script.google.com/macros/s/AKfycbzc_jdkgffFkS9aXUT3mdTXHqYY7dolPhp10eTm08kYBQ6mFi09-Qv8s-q0DjXKhP3Crg/exec'; 
// ============================================================

    // DANH S√ÅCH 30 C√ÇU H·ªéI ƒêA D·∫†NG (B√ÄM S√ÅT B√ÄI 1 - 7 CH√ÇN TR·ªúI S√ÅNG T·∫†O)
    let questions = [
        // --- D·∫†NG 1: T∆Ø DUY GH√âP ƒê√îI (MATCHING) ---
        { q: "H√£y ch·ªçn c·∫∑p gh√©p ƒë√∫ng gi·ªØa b·ªô ph·∫≠n m√°y t√≠nh v√† ch·ª©c nƒÉng:", a: ["B√†n ph√≠m - D√πng ƒë·ªÉ xem h√¨nh ·∫£nh.", "Th√¢n m√°y - X·ª≠ l√Ω th√¥ng tin (gi·ªëng b·ªô n√£o).", "Loa - D√πng ƒë·ªÉ g√µ ch·ªØ.", "M√†n h√¨nh - D√πng ƒë·ªÉ nghe nh·∫°c."], correct: 1 },
        { q: "Gh√©p ƒë√¥i ho·∫°t ƒë·ªông v√† d·∫°ng th√¥ng tin t∆∞∆°ng ·ª©ng:", a: ["Nghe ti·∫øng tr·ªëng tr∆∞·ªùng - Th√¥ng tin d·∫°ng H√¨nh ·∫£nh.", "Nh√¨n th·∫•y ƒë√®n giao th√¥ng - Th√¥ng tin d·∫°ng √Çm thanh.", "ƒê·ªçc s√°ch gi√°o khoa - Th√¥ng tin d·∫°ng Ch·ªØ (VƒÉn b·∫£n).", "Ng·ª≠i th·∫•y m√πi hoa - Th√¥ng tin d·∫°ng VƒÉn b·∫£n."], correct: 2 },
        { q: "C·∫∑p ng√≥n tay n√†o ph·ª• tr√°ch g√µ ph√≠m C√°ch (Space) d√†i nh·∫•t?", a: ["Hai ng√≥n √∫t.", "Hai ng√≥n tr·ªè.", "Hai ng√≥n c√°i.", "Ng√≥n gi·ªØa v√† ng√≥n √°p √∫t."], correct: 2 },

        // --- D·∫†NG 2: ƒêI·ªÄN V√ÄO CH·ªñ TR·ªêNG (FILL IN THE BLANK) ---
        { q: "ƒêi·ªÅn t·ª´ th√≠ch h·ª£p: 'M√°y t√≠nh ƒë·ªÉ b√†n c√≥ 4 b·ªô ph·∫≠n ch√≠nh l√†: M√†n h√¨nh, Th√¢n m√°y, B√†n ph√≠m v√† ......'", a: ["Loa.", "Chu·ªôt m√°y t√≠nh.", "M√°y in.", "Tai nghe."], correct: 1 },
        { q: "ƒêi·ªÅn v√†o ch·ªó tr·ªëng: 'Hai ph√≠m c√≥ gai F v√† J n·∫±m ·ªü h√†ng ph√≠m ......'", a: ["C∆° s·ªü.", "Tr√™n.", "D∆∞·ªõi.", "S·ªë."], correct: 0 },
        { q: "Ho√†n thi·ªán c√¢u: 'S·∫Øp x·∫øp ƒë·ªì d√πng h·ªçc t·∫≠p ngƒÉn n·∫Øp s·∫Ω gi√∫p em t√¨m ki·∫øm ......'", a: ["l√¢u h∆°n.", "kh√≥ khƒÉn h∆°n.", "nhanh ch√≥ng v√† d·ªÖ d√†ng h∆°n.", "m·∫•t nhi·ªÅu th·ªùi gian h∆°n."], correct: 2 },
        { q: "ƒêi·ªÅn t·ª´ c√≤n thi·∫øu: 'K·∫øt qu·∫£ c·ªßa vi·ªác x·ª≠ l√Ω th√¥ng tin l√† ......'", a: ["Th√¥ng tin v√†o.", "Quy·∫øt ƒë·ªãnh ho·∫∑c h√†nh ƒë·ªông.", "Ti·∫øng ·ªìn.", "D·ªØ li·ªáu r√°c."], correct: 1 },

        // --- D·∫†NG 3: X·ª¨ L√ù T√åNH HU·ªêNG (SITUATION) - B√ÄI 1 & 6 ---
        { q: "T√¨nh hu·ªëng: Em ƒëang xem phim ho·∫°t h√¨nh tr√™n Internet th√¨ hi·ªán ra m·ªôt qu·∫£ng c√°o l·∫° v·ªõi h√¨nh ·∫£nh ƒë√°ng s·ª£. Em n√™n l√†m g√¨?", a: ["T√≤ m√≤ b·∫•m v√†o xem th·ª≠.", "T·∫Øt ngay qu·∫£ng c√°o ho·∫∑c nh·ªù b·ªë m·∫π gi√∫p ƒë·ª°.", "G·ª≠i ƒë∆∞·ªùng link ƒë√≥ cho b·∫°n b√®.", "Ng·ªìi kh√≥c."], correct: 1 },
        { q: "T√¨nh hu·ªëng: S√°ng nay ng·ªß d·∫≠y, em nh√¨n th·∫•y tr·ªùi m∆∞a to (Th√¥ng tin). Quy·∫øt ƒë·ªãnh c·ªßa em l√† g√¨?", a: ["M·∫∑c √°o m∆∞a khi ƒëi h·ªçc.", "M·∫∑c qu·∫ßn √°o c·ªôc cho m√°t.", "R·ªß b·∫°n ra t·∫Øm m∆∞a.", "M·ªü c·ª≠a s·ªï ƒë·ªÉ n∆∞·ªõc m∆∞a t·∫°t v√†o nh√†."], correct: 0 },
        { q: "T√¨nh hu·ªëng: Ng∆∞·ªùi l·∫° tr√™n m·∫°ng xin ƒë·ªãa ch·ªâ nh√† v√† s·ªë ƒëi·ªán tho·∫°i c·ªßa em. Em s·∫Ω l√†m g√¨?", a: ["Cho ngay v√¨ h·ªç n√≥i chuy·ªán r·∫•t vui v·∫ª.", "Kh√¥ng cho v√† ch·∫∑n ng∆∞·ªùi ƒë√≥, b√°o cho b·ªë m·∫π.", "Ch·ªâ cho s·ªë ƒëi·ªán tho·∫°i ch·ª© kh√¥ng cho ƒë·ªãa ch·ªâ.", "N√≥i d·ªëi ƒë·ªãa ch·ªâ nh√† h√†ng x√≥m."], correct: 1 },

        // --- D·∫†NG 4: T√åM L·ªñI SAI (SPOT THE ERROR) ---
        { q: "T√¨m h√†nh ƒë·ªông SAI khi s·ª≠ d·ª•ng m√°y t√≠nh:", a: ["Ng·ªìi th·∫≥ng l∆∞ng, m·∫Øt nh√¨n ngang t·∫ßm m√†n h√¨nh.", "G√µ ph√≠m nh·∫π nh√†ng, d·ª©t kho√°t.", "V·ª´a ƒÉn bim bim v·ª´a d√πng tay d√≠nh m·ª° c·∫ßm chu·ªôt.", "Gi·ªØ kho·∫£ng c√°ch m·∫Øt ƒë·∫øn m√†n h√¨nh t·ª´ 50-80cm."], correct: 2 },
        { q: "Ph√°t bi·ªÉu n√†o sau ƒë√¢y l√† SAI v·ªÅ Internet?", a: ["Internet gi√∫p em h·ªçc ti·∫øng Anh.", "Internet gi√∫p em xem d·ª± b√°o th·ªùi ti·∫øt.", "Th√¥ng tin n√†o tr√™n Internet c≈©ng ƒë√∫ng v√† an to√†n tuy·ªát ƒë·ªëi.", "Internet gi√∫p em li√™n l·∫°c v·ªõi ng∆∞·ªùi th√¢n ·ªü xa."], correct: 2 },
        { q: "Chi ti·∫øt n√†o SAI khi m√¥ t·∫£ v·ªÅ M√°y t√≠nh b·∫£ng?", a: ["C√≥ m√†n h√¨nh c·∫£m ·ª©ng.", "Kh√¥ng c√≥ b√†n ph√≠m t√°ch r·ªùi.", "Nh·ªè g·ªçn, d·ªÖ c·∫ßm tr√™n tay.", "Lu√¥n lu√¥n ph·∫£i d√πng chu·ªôt d√¢y m·ªõi ƒëi·ªÅu khi·ªÉn ƒë∆∞·ª£c."], correct: 3 },

        // --- D·∫†NG 5: S·∫ÆP X·∫æP QUY TR√åNH (ORDERING) ---
        { q: "Quy tr√¨nh t·∫Øt m√°y t√≠nh ƒë√∫ng c√°ch tr√™n h·ªá ƒëi·ªÅu h√†nh Windows l√† g√¨?", a: ["B·∫•m n√∫t c√¥ng t·∫Øc tr√™n ·ªï ƒëi·ªán -> M√°y t·∫Øt.", "R√∫t ph√≠ch c·∫Øm ƒëi·ªán ngay l·∫≠p t·ª©c.", "Nh·∫•n n√∫t Start -> Ch·ªçn Power -> Ch·ªçn Shut down.", "L·∫•y khƒÉn che m√†n h√¨nh l·∫°i l√† xong."], correct: 2 },
        { q: "Th·ª© t·ª± c√°c b∆∞·ªõc x·ª≠ l√Ω th√¥ng tin c·ªßa con ng∆∞·ªùi l√† g√¨?", a: ["X·ª≠ l√Ω -> Thu nh·∫≠n -> Ra quy·∫øt ƒë·ªãnh.", "Thu nh·∫≠n th√¥ng tin -> X·ª≠ l√Ω th√¥ng tin -> Ra quy·∫øt ƒë·ªãnh.", "Ra quy·∫øt ƒë·ªãnh -> Thu nh·∫≠n -> X·ª≠ l√Ω.", "Kh√¥ng c√≥ th·ª© t·ª± n√†o c·∫£."], correct: 1 },

        // --- D·∫†NG 6: NH·∫¨N DI·ªÜN H√åNH ·∫¢NH & THAO T√ÅC (B√ÄI 4, 5) ---
        { q: "Thao t√°c 'Nh√°y ƒë√∫p chu·ªôt' ƒë∆∞·ª£c th·ª±c hi·ªán nh∆∞ th·∫ø n√†o?", a: ["Nh·∫•n n√∫t tr√°i chu·ªôt 1 l·∫ßn.", "Nh·∫•n n√∫t ph·∫£i chu·ªôt 1 l·∫ßn.", "Nh·∫•n n√∫t tr√°i chu·ªôt 2 l·∫ßn li√™n ti·∫øp th·∫≠t nhanh.", "Nh·∫•n gi·ªØ n√∫t tr√°i chu·ªôt v√† di chuy·ªÉn."], correct: 2 },
        { q: "Khi ƒë·∫∑t tay l√™n b√†n ph√≠m, hai ng√≥n tr·ªè ph·∫£i ƒë·∫∑t l√™n hai ph√≠m n√†o?", a: ["Ph√≠m G v√† H.", "Ph√≠m F v√† J.", "Ph√≠m A v√† ;", "Ph√≠m D v√† K."], correct: 1 },
        { q: "Bi·ªÉu t∆∞·ª£ng loa tr√™n m√°y t√≠nh th∆∞·ªùng d√πng ƒë·ªÉ ƒëi·ªÅu ch·ªânh g√¨?", a: ["ƒê·ªô s√°ng m√†n h√¨nh.", "√Çm l∆∞·ª£ng (To/Nh·ªè) c·ªßa √¢m thanh.", "K·∫øt n·ªëi m·∫°ng.", "Gi·ªù gi·∫•c."], correct: 1 },

        // --- D·∫†NG 7: PH√ÇN LO·∫†I & S·∫ÆP X·∫æP (B√ÄI 7 - T∆Ø DUY) ---
        { q: "T·∫°i sao ch√∫ng ta n√™n ph√¢n lo·∫°i r√°c (r√°c t√°i ch·∫ø, r√°c h·ªØu c∆°...) v√†o c√°c th√πng kh√°c nhau?", a: ["ƒê·ªÉ cho vui m·∫Øt.", "ƒê·ªÉ r√°c kh√¥ng b·ªã bu·ªìn ch√°n.", "ƒê·ªÉ vi·ªác x·ª≠ l√Ω r√°c d·ªÖ d√†ng v√† b·∫£o v·ªá m√¥i tr∆∞·ªùng.", "ƒê·ªÉ th√πng r√°c tr√¥ng ƒë·∫πp h∆°n."], correct: 2 },
        { q: "B·∫°n Lan c√≥ r·∫•t nhi·ªÅu ·∫£nh: ·∫£nh ƒëi bi·ªÉn, ·∫£nh sinh nh·∫≠t, ·∫£nh v·ªÅ qu√™. Lan n√™n l√†m g√¨ ƒë·ªÉ d·ªÖ t√¨m l·∫°i sau n√†y?", a: ["ƒê·ªÉ t·∫•t c·∫£ chung v√†o m·ªôt ch·ªó l·ªôn x·ªôn.", "Chia th√†nh c√°c nh√≥m (album) ri√™ng bi·ªát: ƒêi bi·ªÉn, Sinh nh·∫≠t, V·ªÅ qu√™.", "X√≥a h·∫øt ·∫£nh ƒëi.", "In t·∫•t c·∫£ ra gi·∫•y r·ªìi v·ª©t ƒëi."], correct: 1 },
        { q: "Trong t·ªß qu·∫ßn √°o, vi·ªác treo √°o s∆° mi v√†o m·ªôt ngƒÉn, qu·∫ßn d√†i v√†o m·ªôt ngƒÉn g·ªçi l√† g√¨?", a: ["L√†m b·ª´a b·ªôn.", "Trang tr√≠ t·ªß.", "Ph√¢n lo·∫°i v√† s·∫Øp x·∫øp.", "Gi·∫∑t qu·∫ßn √°o."], correct: 2 },

        // --- D·∫†NG 8: KI·∫æN TH·ª®C T·ªîNG H·ª¢P (B√ÄI 1-7) ---
        { q: "Th√¥ng tin thu nh·∫≠n ƒë∆∞·ª£c t·ª´ Radio (ƒê√†i ph√°t thanh) ch·ªß y·∫øu l√† d·∫°ng g√¨?", a: ["VƒÉn b·∫£n.", "H√¨nh ·∫£nh.", "√Çm thanh.", "M√πi v·ªã."], correct: 2 },
        { q: "M√°y t√≠nh x√°ch tay (Laptop) c√≥ v√πng c·∫£m ·ª©ng chu·ªôt (Touchpad) n·∫±m ·ªü ƒë√¢u?", a: ["G·∫Øn li·ªÅn tr√™n th√¢n m√°y, ph√≠a d∆∞·ªõi b√†n ph√≠m.", "N·∫±m t√°ch r·ªùi b√™n ngo√†i.", "N·∫±m tr√™n m√†n h√¨nh.", "Laptop kh√¥ng c√≥ chu·ªôt."], correct: 0 },
        { q: "Ph√≠m n√†o gi√∫p x√≥a k√≠ t·ª± ƒë·ª©ng ƒê·∫∞NG TR∆Ø·ªöC (b√™n tr√°i) con tr·ªè so·∫°n th·∫£o?", a: ["Delete.", "Enter.", "Backspace.", "Shift."], correct: 2 },
        { q: "Ph√≠m Caps Lock d√πng ƒë·ªÉ l√†m g√¨?", a: ["Xu·ªëng d√≤ng.", "C√°ch m·ªôt kho·∫£ng tr·∫Øng.", "B·∫≠t ch·∫ø ƒë·ªô g√µ ch·ªØ IN HOA.", "X√≥a k√≠ t·ª±."], correct: 2 },
        { q: "Chu·ªôt m√°y t√≠nh th∆∞·ªùng c√≥ m·∫•y b·ªô ph·∫≠n c∆° b·∫£n?", a: ["1 n√∫t duy nh·∫•t.", "2 n√∫t (Tr√°i, Ph·∫£i) v√† n√∫t cu·ªôn ·ªü gi·ªØa.", "5 n√∫t b·∫•m.", "Kh√¥ng c√≥ n√∫t n√†o."], correct: 1 },
        { q: "H√†ng ph√≠m n·∫±m ngay ph√≠a tr√™n h√†ng ph√≠m c∆° s·ªü g·ªçi l√† g√¨?", a: ["H√†ng ph√≠m s·ªë.", "H√†ng ph√≠m d∆∞·ªõi.", "H√†ng ph√≠m tr√™n.", "H√†ng ph√≠m c√°ch."], correct: 2 }
    ];

    let studentName = "";
    let studentClass = "";
    let currentQuestions = [];

    const startScreen = document.getElementById("start-screen");
    const quizScreen = document.getElementById("quiz-screen");
    const resultScreen = document.getElementById("result-screen");
    const questionsList = document.getElementById("questions-list");
    const loadingOverlay = document.getElementById("loading");

    // X√°o tr·ªôn m·∫£ng
    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
    }

    // Chu·∫©n b·ªã c√¢u h·ªèi (x√°o tr·ªôn)
    function prepareQuestions() {
        let tempQuestions = JSON.parse(JSON.stringify(questions));
        shuffleArray(tempQuestions);
        tempQuestions.forEach(q => {
            let correctAnswerText = q.a[q.correct];
            shuffleArray(q.a);
            q.correct = q.a.indexOf(correctAnswerText);
        });
        return tempQuestions;
    }

    function startQuiz() {
        const nameInput = document.getElementById("student-name").value.trim();
        const classInput = document.getElementById("student-class").value;

        if (nameInput === "" || classInput === "") {
            alert("Con nh·ªõ nh·∫≠p T√™n v√† ch·ªçn L·ªõp nh√©!");
            return;
        }

        studentName = nameInput;
        studentClass = classInput;
        document.getElementById("info-name").textContent = studentName;
        document.getElementById("info-class").textContent = studentClass;

        currentQuestions = prepareQuestions();

        startScreen.classList.add("hidden");
        quizScreen.classList.remove("hidden");
        renderQuestions();
        window.scrollTo(0, 0);
    }

    function renderQuestions() {
        questionsList.innerHTML = "";
        currentQuestions.forEach((q, index) => {
            const qBlock = document.createElement("div");
            qBlock.className = "question-block";
            
            const qTitle = document.createElement("div");
            qTitle.className = "q-title";
            qTitle.textContent = `C√¢u ${index + 1}: ${q.q}`;
            qBlock.appendChild(qTitle);

            const optionsDiv = document.createElement("div");
            q.a.forEach((optionText, optIndex) => {
                const label = document.createElement("label");
                label.className = "option-label";
                
                const input = document.createElement("input");
                input.type = "radio";
                input.name = `q-${index}`;
                input.value = optIndex;
                input.className = "option-input";

                const span = document.createElement("span");
                span.className = "option-text";
                span.textContent = optionText;

                label.appendChild(input);
                label.appendChild(span);
                optionsDiv.appendChild(label);
            });
            qBlock.appendChild(optionsDiv);
            questionsList.appendChild(qBlock);
        });
    }

    function submitQuiz() {
        if (!confirm("Con ƒë√£ ki·ªÉm tra kƒ© b√†i ch∆∞a? B·∫•m OK ƒë·ªÉ n·ªôp nh√©!")) { return; }

        loadingOverlay.classList.remove("hidden");
        let score = 0;

        // Ch·∫•m ƒëi·ªÉm
        currentQuestions.forEach((q, index) => {
            const selected = document.querySelector(`input[name="q-${index}"]:checked`);
            
            if (selected) {
                if (parseInt(selected.value) === q.correct) {
                    score++;
                    selected.parentElement.classList.add("correct");
                } else {
                    selected.parentElement.classList.add("wrong");
                }
            }
            
            // Kh√≥a l·∫°i
            const allInputs = document.querySelectorAll(`input[name="q-${index}"]`);
            allInputs.forEach(inp => inp.disabled = true);
        });

        questionsList.classList.add("review-mode");
        document.getElementById("submit-btn-area").classList.add("hidden");
        document.getElementById("review-btn-area").classList.remove("hidden");

        showResult(score);
        sendToGoogleSheet(score);
    }

    function showResult(finalScore) {
        quizScreen.classList.add("hidden");
        resultScreen.classList.remove("hidden");

        document.getElementById("res-name").textContent = studentName;
        document.getElementById("res-class").textContent = studentClass;
        document.getElementById("res-score").textContent = `${finalScore}`;
        document.getElementById("res-total").textContent = `tr√™n t·ªïng s·ªë ${currentQuestions.length} c√¢u`;
        
        window.scrollTo(0, 0);
    }

    function reviewQuiz() {
        resultScreen.classList.add("hidden");
        quizScreen.classList.remove("hidden");
        window.scrollTo(0, 0);
    }

    function sendToGoogleSheet(finalScore) {
        const statusEl = document.getElementById("connection-status");
        statusEl.textContent = "ƒêang g·ª≠i k·∫øt qu·∫£ cho th·∫ßy...";
        statusEl.style.color = "blue";

        const formData = new FormData();
        formData.append('H·ªç t√™n', studentName);
        formData.append('L·ªõp', studentClass);
        formData.append('ƒêi·ªÉm s·ªë', finalScore);

        fetch(scriptURL, { method: 'POST', body: formData })
            .then(response => {
                statusEl.innerHTML = "‚úÖ ƒê√£ n·ªôp b√†i th√†nh c√¥ng!";
                statusEl.style.color = "green";
            })
            .catch(error => {
                statusEl.innerHTML = "‚ö†Ô∏è L·ªói k·∫øt n·ªëi. Con ch·ª•p m√†n h√¨nh g·ª≠i th·∫ßy nh√©!";
                statusEl.style.color = "red";
            })
            .finally(() => {
                loadingOverlay.classList.add("hidden");
            });
    }
</script>

</body>
</html>

